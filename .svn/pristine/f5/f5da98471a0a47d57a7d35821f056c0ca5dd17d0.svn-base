package com.qs.common.base.basecontroller;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

import com.qs.common.constant.CommonContants;
import com.qs.common.util.PageUtil;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import com.github.pagehelper.Page;
import com.qs.common.dtgrid.model.Pager;

import javax.servlet.http.HttpServletRequest;

/**
 * 
 * @ClassName: BaseController
 * @Description: controller基类,目前功能比较简单
 * @author gaogang
 * @date 2016年7月12日 下午3:02:14
 *
 */
public abstract class BaseController {
	
	public Logger logger = LoggerFactory.getLogger(this.getClass());

	public Map<String, Object> getReturnPage(Pager pager ,Page<Object> page,Object list){
		Map<String, Object> parameters=new HashMap<String, Object>();
		parameters.put("isSuccess", Boolean.TRUE);
		parameters.put("nowPage", pager.getNowPage());
		parameters.put("pageSize", pager.getPageSize());
		parameters.put("pageCount", page.getPages());
		parameters.put("recordCount", page.getTotal());
		parameters.put("startRecord", page.getStartRow());
		//列表展示数据
		parameters.put("exhibitDatas", list);
		return parameters;

	}


	protected PageUtil getPage(HttpServletRequest request) {
		PageUtil page = new PageUtil();
		if (request.getParameterMap().containsKey("page")) {
			page.setPageNum(Integer.valueOf(request.getParameter("page")));
			page.setOrderByColumn(request.getParameter("sidx"));
			page.setPageSize(Integer.valueOf(request.getParameter("rows")));
			page.setOrderByType(request.getParameter("sord"));
		}
		return page;
	}

	protected void executeRequestResult(int result,Map<String, Object> map) {
		if (result > 0) {
			map.put(CommonContants.SUCCESS, Boolean.TRUE);
			map.put(CommonContants.DATA, null);
			map.put(CommonContants.MESSAGE, CommonContants.ADDSUCCESS);
		} else {
			map.put(CommonContants.SUCCESS, Boolean.FALSE);
			map.put(CommonContants.DATA, null);
			map.put(CommonContants.MESSAGE, CommonContants.ADDFAILURE);
		}
	}
	
	public Map<String, Object> getReturnData(Object data,String resultFlag){
		Map<String, Object> parameters=new HashMap<String, Object>();
		parameters.put("svflag",resultFlag);
		//列表展示数据
		parameters.put("data", data);
		return parameters;
		
	}
	
	
}